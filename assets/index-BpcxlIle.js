(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}})();const f=document.getElementById("search-form"),c=document.getElementById("search-input"),i=document.getElementById("history"),g=document.getElementById("search-title"),d=document.getElementById("weather-img"),y=document.getElementById("temp"),w=document.getElementById("wind"),E=document.getElementById("humidity"),l=document.getElementById("forecast"),h="87e00899d72806c24428b5e3e8d1069d",m="https://api.openweathermap.org/data/2.5",u=async r=>{try{const e=await fetch(`${m}/weather?q=${r}&appid=${h}&units=metric`);if(!e.ok)throw new Error(`Error fetching weather: ${e.statusText}`);const t=await e.json();console.log("weatherData:",t),I(t),L(r)}catch(e){console.error("Error al obtener el clima:",e)}},L=async r=>{try{const e=await fetch(`${m}/forecast?q=${r}&appid=${h}&units=metric`);if(!e.ok)throw new Error(`Error fetching forecast: ${e.statusText}`);const t=await e.json();console.log("forecastData:",t),S(t.list)}catch(e){console.error("Error al obtener el pronÃ³stico:",e)}},$=async()=>{try{console.log("ðŸ“¥ Fetching search history from localStorage...");const r=localStorage.getItem("searchHistory");return r?JSON.parse(r):[]}catch(r){return console.error("Error fetching search history:",r),[]}},H=r=>{let e=JSON.parse(localStorage.getItem("searchHistory")||"[]");e.includes(r)||(e.push(r),localStorage.setItem("searchHistory",JSON.stringify(e)))},I=r=>{console.log("Rendering current weather:",r);const{name:e,weather:t,main:s,wind:o}=r;g.innerHTML=`<strong>${e}</strong>`,d.setAttribute("src",`https://openweathermap.org/img/wn/${t[0].icon}@2x.png`),d.setAttribute("alt",t[0].description),d.setAttribute("class","weather-img"),y.textContent=`Temp: ${s.temp}Â°C`,w.textContent=`Wind: ${o.speed} MPH`,E.textContent=`Humidity: ${s.humidity} %`},S=r=>{if(!l)return;l.innerHTML='<h3 class="forecast-title">5-Day Forecast</h3>';const e=document.createElement("div");e.classList.add("forecast-wrapper"),r.forEach((t,s)=>{if(s%8===0){const o=document.createElement("div");o.classList.add("forecast-card"),o.innerHTML=`
        <h5>${new Date(t.dt_txt).toLocaleDateString()}</h5>
        <img src="https://openweathermap.org/img/wn/${t.weather[0].icon}@2x.png" alt="${t.weather[0].description}" class="weather-icon">
        <p>Temp: ${t.main.temp}Â°C</p>
        <p>Wind: ${t.wind.speed} MPH</p>
        <p>Humidity: ${t.main.humidity} %</p>
      `,e.appendChild(o)}}),l.appendChild(e)},C=async()=>{if(!i)return;i.innerHTML="",(await $()).forEach(e=>{const t=document.createElement("button");t.textContent=e,t.classList.add("history-btn"),t.addEventListener("click",()=>u(e)),i.appendChild(t)})},p=async()=>{await C()},b=async r=>{r.preventDefault(),c.value.trim()&&(await u(c.value.trim()),H(c.value.trim()),await p(),c.value="")};document.addEventListener("DOMContentLoaded",p);f.addEventListener("submit",b);
